(function(n){function t(t,r){let u=this;this.element=t;this.options=r;this.valueProperty=r.getValueProperty(this.element);this.textProperty=r.getTextProperty(this.element);this.selectedProperty=r.getSelectedProperty(this.element);this.childrenProperty=r.getChildrenProperty(this.element);this.element.children().hide();this.element.addClass("treeview");this.list=this.createElement("<ul>","treeview-list");this.element.append(this.list);n.each(this.options.data,function(n,t){u.createNode(u.list,t)});this.list.on("click",".treeview-toggler",this,i.togglerClick);this.list.on("change",".treeview-selector",this,i.inputChange)}n.fn.treeview=function(i,r){return n.isFunction(i)&&(r=i,i=null),n(this).each(function(){let u=n(this).data("treeview");if(!u){if(i&&i.data){if(!n.isArray(i.data))throw'treeview error: expected option "data" to be an array';}else throw'treeview error: expected required option "data"';let r=n.extend({},n.fn.treeview.defaults,i);u=new t(n(this),r);n(this).data("treeview",u)}n.isFunction(r)&&r.bind(u)(u)})};n.fn.treeview.defaults={getValueProperty:function(t){return n(t).data("value-property")||"value"},getTextProperty:function(t){return n(t).data("text-property")||"text"},getSelectedProperty:function(t){return n(t).data("selected-property")||"selected"},getChildrenProperty:function(t){return n(t).data("children-property")||"children"}};t.prototype.createElement=function(t,i){let r=n.extend.apply({},Array.prototype.slice.call(arguments,2));return n(t,r).addClass(i)};t.prototype.createList=function(t,i){let f=this,r=this.createElement("<ul>","treeview-list"),u=this.createElement("<div>","treeview-toggler");u.data("toggle-target",r);t.prepend(u);t.append(r);n.each(i,function(n,t){f.createNode(r,t)})};t.prototype.createNode=function(n,t){var u=Math.random().toString().replace(".",""),i=this.createElement("<li>"),r=this.createElement("<input>","treeview-selector",{type:"checkbox",value:t[this.valueProperty],id:u});i.append(r);i.append(this.createElement("<label>","treeview-selector-label",{"for":u}).text(t[this.textProperty]));i.data("node-data",t);n.append(i);t[this.childrenProperty]?(this.createList(i,t[this.childrenProperty]),i.find(".treeview-list input:checked").length===i.find(".treeview-list input").length&&r.prop("checked",!0)):t[this.selectedProperty]&&r.prop("checked",!0)};t.prototype.remove=function(){this.list.remove();this.element.removeClass("treeview");this.element.removeData("treeview");this.element.children().show()};t.prototype.getSelectedValues=function(){let n=this;return this.getSelectedData().map(function(t){return t[n.valueProperty]})};t.prototype.getSelectedData=function(){return this.element.find("input.treeview-selector:checked").closest("li").map(function(){return n(this).data("node-data")}).get()};let i={togglerClick:function(t){n(t.target).toggleClass("treeview-toggler-closed");n(t.target).data("toggle-target").toggle()},inputChange:function(t){var r=n(t.target).is(":checked"),i=n(t.target).closest("li");i.find("input.treeview-selector").prop("checked",r);r?i.parents("li").children("input.treeview-selector").prop("checked",function(){return n(this).closest("li").find("input.treeview-selector").not(this).not(":checked").length==0}):i.parents("li").children("input.treeview-selector").prop("checked",!1)}}})(jQuery);